{
  "testCase": "lodge-05-complex-metadata",
  "payment": {
    "_id": "pay_105",
    "paymentId": "pi_stripe_105",
    "transactionId": "pi_stripe_105",
    "amount": 1364.7,
    "grossAmount": 1400,
    "fees": 35.3,
    "currency": "AUD",
    "paymentMethod": "credit_card",
    "paymentDate": "2025-07-14T04:38:33.540Z",
    "customerEmail": "customer@email.com",
    "cardLast4": "4242",
    "cardBrand": "visa",
    "status": "paid",
    "source": "stripe",
    "sourceFile": "Stripe - LodgeTix Darren Export.csv"
  },
  "registration": {
    "_id": "reg105",
    "confirmationNumber": "LDG-2024-005",
    "registrationType": "lodge",
    "type": "lodge",
    "functionName": "Centenary Celebration",
    "lodgeNameNumber": "Centenary Lodge 555",
    "metadata": {
      "billingDetails": {
        "businessName": "The Centenary Lodge No. 555",
        "businessNumber": "ABN 55 555 555 555",
        "firstName": "James",
        "lastName": "Treasurer",
        "email": "treasurer@centenarylodge.org",
        "addressLine1": "Masonic Centre",
        "addressLine2": "555 Grand Avenue",
        "city": "Hobart",
        "postalCode": "7000",
        "stateProvince": "TAS",
        "country": "Australia"
      },
      "membershipType": "Gold",
      "notes": "Celebrating 100 years"
    },
    "registrationData": {
      "attendees": [
        {
          "firstName": "Grand",
          "lastName": "Master"
        },
        {
          "firstName": "Deputy",
          "lastName": "GM"
        },
        {
          "firstName": "Senior",
          "lastName": "Warden"
        },
        {
          "firstName": "Junior",
          "lastName": "Warden"
        }
      ],
      "selectedTickets": [
        {
          "name": "Centenary Gala Dinner",
          "price": 250,
          "quantity": 4
        },
        {
          "name": "Commemorative Package",
          "price": 100,
          "quantity": 4
        }
      ]
    }
  },
  "customerInvoice": {
    "invoiceType": "customer",
    "invoiceNumber": "LTIV-2412-TEST010",
    "paymentId": "pay_105",
    "registrationId": "reg105",
    "date": "2025-07-14T04:38:33.540Z",
    "dueDate": "2025-08-13T04:38:33.540Z",
    "billTo": {
      "businessName": "The Centenary Lodge No. 555",
      "businessNumber": "ABN 55 555 555 555",
      "firstName": "James",
      "lastName": "Treasurer",
      "email": "treasurer@centenarylodge.org",
      "addressLine1": "Masonic Centre",
      "addressLine2": "555 Grand Avenue",
      "city": "Hobart",
      "postalCode": "7000",
      "stateProvince": "TAS",
      "country": "Australia"
    },
    "supplier": {
      "name": "United Grand Lodge of NSW & ACT",
      "abn": "93 230 340 687",
      "address": "Level 5, 279 Castlereagh St Sydney NSW 2000",
      "issuedBy": "LodgeTix as Agent"
    },
    "items": [
      {
        "description": "LDG-2024-005 | The Centenary Lodge No. 555 for Centenary Celebration",
        "quantity": 0,
        "price": 0,
        "total": 0,
        "type": "header"
      },
      {
        "description": "The Centenary Lodge No. 555 - 4 Members",
        "quantity": 4,
        "price": 350,
        "total": 1400,
        "type": "other"
      }
    ],
    "subtotal": 1400,
    "processingFees": 35.3,
    "gstIncluded": 130.48,
    "totalBeforeGST": 1435.3,
    "total": 1435.3,
    "payment": {
      "method": "Credit Card",
      "transactionId": "pi_stripe_105",
      "paidDate": "2025-07-14T04:38:33.540Z",
      "amount": 1400,
      "currency": "AUD",
      "last4": "4242",
      "cardBrand": "Visa",
      "status": "completed",
      "source": "stripe"
    },
    "status": "paid",
    "notes": ""
  },
  "supplierInvoice": {
    "invoiceType": "supplier",
    "invoiceNumber": "LTSP-2412-TEST010",
    "paymentId": "pay_105",
    "registrationId": "reg105",
    "relatedInvoiceId": "LTIV-2412-TEST010",
    "date": "2025-07-14T04:38:33.540Z",
    "dueDate": "2025-08-13T04:38:33.540Z",
    "billTo": {
      "businessName": "United Grand Lodge of NSW & ACT",
      "businessNumber": "93 230 340 687",
      "firstName": "",
      "lastName": "",
      "email": "accounting@masonicnswact.com",
      "addressLine1": "Level 5, 279 Castlereagh St Sydney NSW 2000",
      "city": "Sydney",
      "postalCode": "2000",
      "stateProvince": "NSW",
      "country": "Australia"
    },
    "supplier": {
      "name": "LodgeTix",
      "abn": "21 013 997 842",
      "address": "110/54a Blackwall Point Rd, Chiswick NSW 2046",
      "issuedBy": "Darren Allatt as Sole Trader"
    },
    "items": [
      {
        "description": "Processing Fees Reimbursement",
        "quantity": 1,
        "price": 35.3,
        "total": 35.3,
        "type": "other"
      },
      {
        "description": "Software Utilization Fee",
        "quantity": 1,
        "price": 47.36,
        "total": 47.36,
        "type": "other"
      }
    ],
    "subtotal": 82.66,
    "processingFees": 0,
    "gstIncluded": 7.51,
    "totalBeforeGST": 82.66,
    "total": 82.66,
    "payment": {
      "method": "Credit Card",
      "transactionId": "pi_stripe_105",
      "paidDate": "2025-07-14T04:38:33.540Z",
      "amount": 82.66,
      "currency": "AUD",
      "last4": "4242",
      "cardBrand": "Visa",
      "status": "pending",
      "source": "stripe"
    },
    "status": "pending",
    "notes": "Related to Customer Invoice: LTIV-2412-TEST010"
  },
  "summary": {
    "registrationType": "lodge",
    "paymentSource": "stripe",
    "customerTotal": 1435.3,
    "supplierTotal": 82.66,
    "processingFees": 35.3,
    "softwareUtilizationFee": 47.36
  }
}