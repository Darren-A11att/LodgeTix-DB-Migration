=== ENHANCED PAYMENT SYNC LOG ===
Started at: 2025-08-17T16:24:28.706Z
Processing Square with orders/customers and contacts

✓ Supabase client initialized
✓ Square provider initialized (REQUIRED)
✓ DA-LODGETIX initialized
✓ WS-LODGETIX initialized
✓ WS-LODGETICKETS initialized

Initialized 4 payment provider(s)

=== STARTING ENHANCED PAYMENT SYNC ===
Processing workflow:
1. Import payment to import_payments (with field transformation)
2. Fetch order/customer for Square payments
3. Find registration in Supabase
4. Update with charge ID for Stripe
5. Import to import_registrations (with field transformation)
6. Import attendees to import_attendees
7. Import tickets to import_tickets
8. Import contacts to import_contacts with deduplication
9. Process booking contact as customer with registration metadata
9. Selective sync to production collections based on field comparison

✓ Connected to MongoDB:
  Cluster: LodgeTix-migration-test-1
  Database: lodgetix
  URI: mongodb+srv:****@lodgetix-migration-test.wydwfu6.mongodb.net/lodgetix?retryWrites=true&w=majority&appName=LodgeTix-migration-test-1

━━━ Processing Square ━━━

Fetching ALL historical Square payments (one at a time)...
  Fetched payment 1 (cursor: none)

📝 Processing Square payment: 5WZURjeHRtZKVpza9ECnKKz2R6cZY
  ✅ Importing completed payment - status: COMPLETED
  ✓ Payment already exists in production - skipping
  Got cursor for next payment
  Fetched payment 2 (cursor: provided)

📝 Processing Square payment: 5GXVymBC3x18occbL5IXfi34knaZY
  ✅ Importing completed payment - status: COMPLETED
  ✓ Payment already exists in production - skipping
  Got cursor for next payment
  Fetched payment 3 (cursor: provided)

📝 Processing Square payment: 37uzagXg6306GrJSUUf574HvB0CZY
  ✅ Importing completed payment - status: COMPLETED
  ✓ Payment already exists in production - skipping
  Got cursor for next payment
  Fetched payment 4 (cursor: provided)

📝 Processing Square payment: jtwvvCSh0dwASWgUW1TAfF2l635YY
  ✅ Importing completed payment - status: COMPLETED
  ✓ Payment already exists in production - skipping
  Got cursor for next payment
  Fetched payment 5 (cursor: provided)

📝 Processing Square payment: 7nHbZYYBn7M1thYdSmgNo9n28yKZY
  ✅ Importing completed payment - status: COMPLETED
  ✓ Payment already exists in production - skipping
  Got cursor for next payment
  Fetched payment 6 (cursor: provided)

📝 Processing Square payment: p4g7czFGnXbMPrHYOtWSnqCieZLZY
  ✅ Importing completed payment - status: COMPLETED
  ✓ Payment already exists in production - skipping
  Got cursor for next payment
