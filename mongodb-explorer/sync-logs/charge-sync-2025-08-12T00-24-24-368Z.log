=== CHARGE-BASED PAYMENT SYNC LOG ===
Started at: 2025-08-12T00:24:24.369Z
Using charge IDs instead of payment intent IDs

✓ Supabase client initialized
✓ Square provider initialized
✓ DA-LODGETIX initialized
✓ WS-LODGETIX initialized
✓ WS-LODGETICKETS initialized

Initialized 4 payment provider(s)

=== STARTING CHARGE-BASED PAYMENT SYNC ===
Processing pattern:
1. Get charges from Stripe (not payment intents)
2. Import charge to payments_import collection
3. Find registration using payment intent ID
4. Replace payment intent ID with charge ID in registration
5. Import to registrations_import collection
6. Match and import to final collections
7. Process attendees and tickets

✓ Connected to MongoDB database: lodgetix
✓ Created collection: payments_import
✓ Created collection: registrations_import

━━━ Processing Square ━━━
Square authentication error

━━━ Processing DA-LODGETIX ━━━

📝 Processing charge: ch_3RYNqYKBASow5NsW17D1d6gl
  ✓ Imported charge to payments_import
  ✓ Found registration: 222ddcc8-4f1a-4301-9e44-18a89770e1ed
  ✓ Imported registration to registrations_import with charge ID
  ✓ Imported to final collections
  ✓ Found 1 attendee(s)
    ✓ Found 0 ticket(s) for attendee undefined
  ✅ Completed processing charge ch_3RYNqYKBASow5NsW17D1d6gl

📝 Processing charge: ch_3RYNH3KBASow5NsW0hd6SVQA
  ⏭️ Skipping - fully refunded

📝 Processing charge: ch_3RYMRnKBASow5NsW1rQGpHtU
  ⏭️ Skipping - fully refunded
Reached limit of 3 for DA-LODGETIX

━━━ Processing WS-LODGETIX ━━━

📝 Processing charge: ch_3RatsQHDfNBUEWUu0i6JkO6W
  ✓ Imported charge to payments_import
  ✓ Found registration: 8a63ce42-9276-4254-b3cc-406d78cdbb16
  ✓ Imported registration to registrations_import with charge ID
  ✓ Imported to final collections
  ✓ Found 1 attendee(s)
    ✓ Found 0 ticket(s) for attendee undefined
  ✅ Completed processing charge ch_3RatsQHDfNBUEWUu0i6JkO6W

📝 Processing charge: ch_3RatmpHDfNBUEWUu0aKhh2Yq
  ✓ Imported charge to payments_import
  ✓ Found registration: a502eec2-4f0b-44aa-b605-a6ec622a546a
  ✓ Imported registration to registrations_import with charge ID
  ✓ Imported to final collections
  ✓ Found 0 attendee(s)
  ✅ Completed processing charge ch_3RatmpHDfNBUEWUu0aKhh2Yq

📝 Processing charge: ch_3RatcXHDfNBUEWUu18ZKzlo9
  ✓ Imported charge to payments_import
  ✓ Found registration: 529f2e9c-0ae1-4fde-ac1b-f2cd5eb70776
  ✓ Imported registration to registrations_import with charge ID
  ✓ Imported to final collections
  ✓ Found 2 attendee(s)
    ✓ Found 0 ticket(s) for attendee undefined
    ✓ Found 0 ticket(s) for attendee undefined
  ✅ Completed processing charge ch_3RatcXHDfNBUEWUu18ZKzlo9
Reached limit of 3 for WS-LODGETIX

━━━ Processing WS-LODGETICKETS ━━━

📝 Processing charge: ch_3RbJfOCari1bgsWq0CxPr7NI
  ✓ Imported charge to payments_import
  ✓ Found registration: 533f4153-ab85-4552-a372-2d71fc42e546
  ✓ Imported registration to registrations_import with charge ID
  ✓ Imported to final collections
  ✓ Found 1 attendee(s)
    ✓ Found 0 ticket(s) for attendee undefined
  ✅ Completed processing charge ch_3RbJfOCari1bgsWq0CxPr7NI

📝 Processing charge: ch_3RbGXFCari1bgsWq1HXOJzrX
  ✓ Imported charge to payments_import
  ✓ Found registration: 371a8bae-7c4f-4650-a0d6-085912e5f57c
